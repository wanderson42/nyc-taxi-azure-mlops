name: BatchService
prefect-version: 3.1.11

build:

push:
- prefect_azure.deployments.steps.push_to_azure_blob_storage:
    id: push_code
    requires: prefect-azure[blob_storage]>=0.2.8
    container: mlflowcontainer
    folder: BatchService
    credentials: '{{ prefect.blocks.azure-blob-storage-credentials.blob-credentials
      }}'

pull:
- prefect_azure.deployments.steps.pull_from_azure_blob_storage:
    id: pull_code
    requires: prefect-azure[blob_storage]>=0.2.8
    container: '{{ push_code.container }}'
    folder: '{{ push_code.folder }}'
    credentials: '{{ prefect.blocks.azure-blob-storage-credentials.blob-credentials
      }}'

deployments:
- name: nyc-tlc-green-taxi-batch-service
  entrypoint: batch_score.py:predictions
  tags: []
  description: Fluxo para previsões em lote de corridas de táxi.
  schedules:
  - cron: 0 9 15 * *
    timezone: America/Sao_Paulo
    day_or: true
    active: true
  parameters:
    taxi_type: green
    run_id: 61f6a67d014d4e6594354806648ca5de
  work_pool:
    name: vm-mlops
    work_queue_name: default
    job_variables: {}
  version:
  concurrency_limit:
  enforce_parameter_schema: true
  pull:
  - prefect_azure.deployments.steps.pull_from_azure_blob_storage:
      id: pull_code
      requires: prefect-azure[blob_storage]>=0.2.8
      container: mlflowcontainer
      folder: BatchService
      credentials: '{{ prefect.blocks.azure-blob-storage-credentials.blob-credentials
        }}'
